<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>defby.ai</title>
    <link rel="icon" href="/favicon.ico?v=2" sizes="any" />
    <link rel="shortcut icon" href="/favicon.ico?v=2" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=2" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=2" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg?v=2" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=2" />
    <link rel="mask-icon" href="/favicon.svg?v=2" color="#56807B" />
    <link rel="manifest" href="/site.webmanifest?v=2" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Asta+Sans:wght@100;200;300;400;500;700;800&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg: #efefef;
        --text: #5f5f5f;
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        margin: 0;
        height: 100%;
      }

      body {
        font-family: "Asta Sans", "Helvetica Neue", Arial, sans-serif;
        background: var(--bg);
      }

      .page {
        position: relative;
        height: 100vh;
        overflow: hidden;
        display: grid;
        place-items: center;
      }

      .dot-field {
        position: absolute;
        inset: -8%;
        z-index: 0;
        pointer-events: none;
      }

      .dot-layer {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        will-change: transform;
        transform: translate3d(0, 0, 0);
      }

      .brand {
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        z-index: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .brand-row {
        display: flex;
        align-items: center;
        gap: clamp(12px, 1.5vw, 18px);
        padding: 12px 16px;
      }

      .brand img {
        width: clamp(48px, 7vw, 86px);
        height: auto;
        display: block;
      }

      .brand h1 {
        margin: 0;
        color: var(--text);
        font-size: clamp(2rem, 5.5vw, 4.4rem);
        line-height: 0.95;
        font-weight: 700;
        letter-spacing: -0.03em;
      }

      .tagline {
        margin: 20px 0 0;
        color: #6b6b6b;
        font-size: clamp(1rem, 1.6vw, 1.28rem);
        line-height: 1.2;
        letter-spacing: 0.01em;
        font-weight: 100;
        font-family: "Asta Sans", "Helvetica Neue", Arial, sans-serif;
        text-align: center;
        white-space: nowrap;
      }
    </style>
  </head>
  <body>
    <main class="page" id="page">
      <div class="dot-field" aria-hidden="true">
        <canvas class="dot-layer layer-far" id="layer-far" data-depth="1"></canvas>
        <canvas class="dot-layer layer-back" id="layer-back" data-depth="2"></canvas>
        <canvas class="dot-layer layer-back-2" id="layer-back-2" data-depth="3"></canvas>
        <canvas class="dot-layer layer-mid" id="layer-mid" data-depth="5"></canvas>
        <canvas class="dot-layer layer-front" id="layer-front" data-depth="8"></canvas>
        <canvas class="dot-layer layer-front-2" id="layer-front-2" data-depth="11"></canvas>
        <canvas class="dot-layer layer-near-dark" id="layer-near-dark" data-depth="13"></canvas>
        <canvas class="dot-layer layer-near-dark-2" id="layer-near-dark-2" data-depth="16"></canvas>
      </div>

      <section class="brand" aria-label="defby.ai brand">
        <div class="brand-row">
          <img src="/defby_logo.svg" alt="defby.ai logo" />
          <h1>defby.ai</h1>
        </div>
        <p class="tagline">&nbsp;&nbsp;&nbsp;AI defines everything. You make it matter.</p>
      </section>
    </main>

    <script is:inline>
      const page = document.getElementById("page");
      const parallaxLayers = Array.from(document.querySelectorAll(".dot-layer"));
      const layers = [
        { id: "layer-far", color: "196,196,196", minR: 0.45, maxR: 0.9, density: 0.000189, centerDrop: 0.44, seed: 11 },
        { id: "layer-back", color: "191,191,191", minR: 0.5, maxR: 0.95, density: 0.000227, centerDrop: 0.4, seed: 23 },
        { id: "layer-back-2", color: "186,186,186", minR: 0.55, maxR: 1, density: 0.000265, centerDrop: 0.36, seed: 37 },
        { id: "layer-mid", color: "181,181,181", minR: 0.6, maxR: 1.05, density: 0.000302, centerDrop: 0.31, seed: 41 },
        { id: "layer-front", color: "177,177,177", minR: 0.65, maxR: 1.1, density: 0.00034, centerDrop: 0.26, seed: 59 },
        { id: "layer-front-2", color: "173,173,173", minR: 0.7, maxR: 1.15, density: 0.000378, centerDrop: 0.22, seed: 71 },
        { id: "layer-near-dark", color: "164,164,164", minR: 0.75, maxR: 1.2, density: 0.000403, centerDrop: 0.18, seed: 89 },
        { id: "layer-near-dark-2", color: "156,156,156", minR: 0.82, maxR: 1.28, density: 0.000428, centerDrop: 0.14, seed: 97 }
      ];

      const mulberry32 = (seed) => {
        let t = seed >>> 0;
        return () => {
          t += 0x6d2b79f5;
          let r = Math.imul(t ^ (t >>> 15), 1 | t);
          r ^= r + Math.imul(r ^ (r >>> 7), 61 | r);
          return ((r ^ (r >>> 14)) >>> 0) / 4294967296;
        };
      };

      const drawLayer = (canvas, config, index) => {
        if (!canvas) {
          return;
        }
        const rect = canvas.getBoundingClientRect();
        const width = Math.max(1, Math.floor(rect.width));
        const height = Math.max(1, Math.floor(rect.height));
        const dpr = window.devicePixelRatio || 1;
        canvas.width = Math.round(width * dpr);
        canvas.height = Math.round(height * dpr);

        const ctx = canvas.getContext("2d");
        if (!ctx) {
          return;
        }
        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
        ctx.clearRect(0, 0, width, height);
        ctx.fillStyle = `rgb(${config.color})`;

        const rand = mulberry32(config.seed + width * 17 + height * 31 + index * 101);
        const target = Math.floor(width * height * config.density);
        const cell = Math.max(18, Math.min(54, Math.sqrt(1 / (config.density * 1.8))));
        const cols = Math.ceil(width / cell);
        const rows = Math.ceil(height / cell);
        const drawChance = Math.min(0.96, target / (cols * rows));

        for (let row = 0; row < rows; row += 1) {
          for (let col = 0; col < cols; col += 1) {
            if (rand() > drawChance) {
              continue;
            }

            const x = (col + 0.08 + rand() * 0.84) * cell;
            const y = (row + 0.08 + rand() * 0.84) * cell;

            if (x >= width || y >= height) {
              continue;
            }

            const nx = (x - width * 0.5) / (width * 0.43);
            const ny = (y - height * 0.5) / (height * 0.3);
            const dist = nx * nx + ny * ny;
            if (dist < 1.2) {
              const centerWeight = 1 - dist / 1.2;
              if (rand() < config.centerDrop * centerWeight) {
                continue;
              }
            }

            const radius = config.minR + rand() * (config.maxR - config.minR);
            ctx.globalAlpha = 0.38 + rand() * 0.48;
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, Math.PI * 2);
            ctx.fill();
          }
        }
      };

      const drawAllLayers = () => {
        layers.forEach((config, index) => {
          const canvas = document.getElementById(config.id);
          drawLayer(canvas, config, index);
        });
      };

      if (page) {
        const applyParallax = (x, y) => {
          for (const layer of parallaxLayers) {
            const depth = Number(layer.dataset.depth || 0);
            layer.style.transform = `translate3d(${x * -depth}px, ${y * -depth}px, 0)`;
          }
        };

        const setParallax = (clientX, clientY) => {
          const x = (clientX / window.innerWidth - 0.5) * 2;
          const y = (clientY / window.innerHeight - 0.5) * 2;
          applyParallax(x, y);
        };

        window.addEventListener(
          "pointermove",
          (event) => {
            setParallax(event.clientX, event.clientY);
          },
          { passive: true }
        );

        window.addEventListener("pointerleave", () => {
          applyParallax(0, 0);
        });
      }

      drawAllLayers();
      let resizeTimer = null;
      window.addEventListener("resize", () => {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(drawAllLayers, 120);
      });
    </script>
  </body>
</html>
